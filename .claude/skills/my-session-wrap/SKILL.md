---
name: my-session-wrap
description: 세션 종료 시 작업 정리, 문서 업데이트, 학습 기록을 하는 스킬. "/wrap", "세션 정리", "마무리" 요청에 사용.
---

# my-session-wrap

## Execution Flow

```
┌─────────────────────────────────────────────────────┐
│  Step 1: Git 상태 확인                                │
│  ─ 변경된 파일, 커밋 이력, 브랜치 상태 파악             │
├─────────────────────────────────────────────────────┤
│  Step 2: Phase 1 — 4개 분석 에이전트 (병렬 실행)       │
│  ┌────────────────────┬────────────────────┐         │
│  │  doc-updater       │  automation-scout  │         │
│  │  (문서 업데이트)     │  (자동화 제안)      │         │
│  ├────────────────────┼────────────────────┤         │
│  │  learning-extractor│  followup-suggester│         │
│  │  (배운 것 정리)     │  (다음 할 일)       │         │
│  └────────────────────┴────────────────────┘         │
├─────────────────────────────────────────────────────┤
│  Step 3: Phase 2 — 검증 에이전트 (순차 실행)           │
│  ─ duplicate-checker: 중복 확인 및 병합               │
├─────────────────────────────────────────────────────┤
│  Step 4: 결과 통합                                    │
│  ─ Phase 1 + Phase 2 결과를 하나로 정리               │
├─────────────────────────────────────────────────────┤
│  Step 5: 사용자 선택 + 실행                           │
│  ─ 실행할 작업을 선택받고, 선택된 것만 실행             │
└─────────────────────────────────────────────────────┘
```

## Step 1: 변경 내용 확인

이 세션에서 어떤 작업을 했는지 자동으로 파악한다.

### 실행할 명령

1. `git status` — 변경된 파일 목록 확인
2. `git diff --stat` — 수정된 파일과 변경량 요약
3. `git log --oneline -10` — 최근 커밋 이력 확인

### 결과 정리

위 명령 결과를 바탕으로 아래 형식으로 요약한다:

```
📋 세션 요약
- 변경된 파일: (개수)개
- 새로 만든 파일: (목록)
- 수정한 파일: (목록)
- 커밋 현황: (커밋 수)건
```

## Step 2: Phase 1 — 4개 분석 에이전트 (병렬 실행)

Step 1의 세션 요약을 바탕으로, 4개의 전문가 에이전트를 **동시에** 실행한다.
각 에이전트는 Task 도구(subagent_type: "general-purpose")로 병렬 호출한다.

### Agent 1: doc-updater (문서 업데이트 탐색)

- **역할**: 프로젝트 문서 중 업데이트가 필요한 곳을 찾는다
- **분석 대상**: CLAUDE.md, README.md, 기타 문서 파일
- **출력 형식**:
  ```
  📝 문서 업데이트 제안
  - [파일명]: (업데이트 내용)
  ```

### Agent 2: automation-scout (자동화 제안)

- **역할**: 세션에서 반복된 패턴을 발견하고 자동화를 제안한다
- **분석 대상**: 반복적으로 실행한 명령, 수동으로 처리한 작업
- **출력 형식**:
  ```
  🤖 자동화 제안
  - (반복 패턴): (자동화 방법)
  ```

### Agent 3: learning-extractor (학습 내용 정리)

- **역할**: 이 세션에서 새로 배운 것을 정리한다
- **분석 대상**: 새로 사용한 도구, 해결한 문제, 발견한 패턴
- **출력 형식**:
  ```
  💡 오늘 배운 것
  - (주제): (내용 요약)
  ```

### Agent 4: followup-suggester (후속 작업 제안)

- **역할**: 다음 세션에서 이어서 할 작업을 제안한다
- **분석 대상**: 미완성 작업, TODO 항목, 개선 가능한 부분
- **출력 형식**:
  ```
  📌 다음에 할 일
  - [ ] (작업 내용)
  ```

## Step 3: Phase 2 — 검증 에이전트 (순차 실행)

Phase 1의 4개 에이전트 결과를 모두 받은 뒤, duplicate-checker가 중복을 검증한다.
Phase 1이 완료된 후에 실행해야 하므로 **순차 실행**한다.

### Agent 5: duplicate-checker (중복 검증)

- **역할**: Phase 1 결과에서 중복되는 제안을 찾아 정리한다
- **입력**: Phase 1의 4개 에이전트 결과 전체
- **검증 기준**:
  - **완전 중복**: 같은 파일에 대해 같은 작업을 제안 → 하나만 남기고 제거
  - **부분 중복**: 비슷한 주제의 다른 제안 → 하나로 병합 제안
  - **고유 항목**: 중복 없음 → 그대로 유지
- **출력 형식**:
  ```
  🔍 중복 검증 결과
  - 제거: (완전 중복 항목)
  - 병합 제안: (부분 중복 항목) → (병합 결과)
  - 유지: (고유 항목 수)건
  ```

## Step 4: 결과 통합

Phase 1과 Phase 2의 결과를 하나로 합쳐서 사용자에게 보여준다.

### 통합 보고서 형식

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 세션 요약: (변경 파일 수)개 파일, (커밋 수)건 커밋

📝 문서 업데이트 제안
- (doc-updater 결과, 중복 제거 반영)

🤖 자동화 제안
- (automation-scout 결과, 중복 제거 반영)

💡 오늘 배운 것
- (learning-extractor 결과, 중복 제거 반영)

📌 다음에 할 일
- (followup-suggester 결과, 중복 제거 반영)

🔍 중복 처리: (제거 수)건 제거, (병합 수)건 병합
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## Step 5: 사용자 선택 + 실행

통합 보고서를 보여준 뒤, AskUserQuestion으로 실행할 작업을 선택받는다.

### 선택지

AskUserQuestion을 사용하여 아래 옵션을 제시한다 (multiSelect: true):

- **커밋 생성**: 변경 사항을 정리해서 커밋
- **문서 업데이트**: doc-updater가 제안한 문서 수정 실행
- **자동화 생성**: automation-scout이 제안한 스크립트/스킬 생성
- **건너뛰기**: 아무 작업도 실행하지 않고 종료

### 실행 규칙

1. 사용자가 선택한 작업**만** 실행한다
2. 선택하지 않은 작업은 실행하지 않는다
3. "건너뛰기"를 선택하면 보고서만 출력하고 종료한다
4. 각 작업 실행 후 결과를 간략히 보고한다
